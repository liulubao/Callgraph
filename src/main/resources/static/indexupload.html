<!DOCTYPE html>
<!-- release v4.5.2, copyright 2014 - 2018 Kartik Visweswaran -->
<!--suppress JSUnresolvedLibraryURL -->
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Krajee JQuery Plugins - &copy; Kartik</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" crossorigin="anonymous">
    <link href="css/fileinput.css" media="all" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" crossorigin="anonymous">
    <link href="themes/explorer-fas/theme.css" media="all" rel="stylesheet" type="text/css"/>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="js/plugins/sortable.js" type="text/javascript"></script>
    <script src="js/fileinput.js" type="text/javascript"></script>
    <script src="js/locales/fr.js" type="text/javascript"></script>
    <script src="js/locales/es.js" type="text/javascript"></script>
    <script src="themes/fas/theme.js" type="text/javascript"></script>
    <script src="themes/explorer-fas/theme.js" type="text/javascript"></script>
</head>
<body>
<div class="container my-4">
    <h1>Bootstrap File Input Examples
        <!--<small><a href="https://github.com/kartik-v/bootstrap-fileinput-samples"><i-->
        <!--class="glyphicon glyphicon-download"></i> Download Sample Files</a></small>-->
    </h1>
    <hr>
    <!--<form enctype="multipart/form-data">-->
    <!--<div class="file-loading">-->
    <!--<input id="kv-explorer" type="file" multiple>-->
    <!--</div>-->
    <!--<br>-->
    <!--<div class="file-loading">-->
    <!--<input id="file-0a" class="file" type="file" multiple data-min-file-count="1" data-theme="fas">-->
    <!--</div>-->
    <!--<br>-->
    <!--<button type="submit" class="btn btn-primary">Submit</button>-->
    <!--<button type="reset" class="btn btn-outline-secondary">Reset</button>-->
    <!--</form>-->
    <!--<hr>-->
    <!--<form enctype="multipart/form-data">-->
    <!--<label for="file-0b">Test invalid input type</label>-->
    <!--<div class="file-loading">-->
    <!--<input id="file-0b" name="file-0b" class="file" type="text" multiple data-min-file-count="1" data-theme="fas">-->
    <!--</div>-->
    <!--<script>-->
    <!--$(document).on('ready', function () {-->
    <!--$("#file-0b").fileinput();-->
    <!--});-->
    <!--</script>-->
    <!--</form>-->
    <hr>
    <form enctype="multipart/form-data">
        <div class="file-loading">
            <!--<input id="file-0c" class="file" type="file" multiple data-min-file-count="3" data-theme="fas" data-show-preview="false">-->
            <input id="file" class="file" type="file" data-show-preview="false">
        </div>
        <hr>
        <!--<div class="form-group">-->
        <!--<div class="file-loading">-->
        <!--<input id="file-0d" class="file" type="file" data-theme="fas">-->
        <!--</div>-->
        <!--</div>-->
        <!--<hr>-->
        <!--<div class="form-group">-->
        <!--<div class="file-loading">-->
        <!--<input id="file-1" type="file" multiple class="file" data-overwrite-initial="false" data-min-file-count="2" data-theme="fas">-->
        <!--</div>-->
        <!--</div>-->
        <!--<hr>-->
        <!--<div class="form-group">-->
        <!--<div class="file-loading">-->
        <!--<input id="file-2" type="file" class="file" readonly data-show-upload="false" data-theme="fas">-->
        <!--</div>-->
        <!--</div>-->
        <!--<hr>-->
        <!--<div class="form-group">-->
        <!--<div class="file-loading">-->
        <!--<label>Preview File Icon</label>-->
        <!--<input id="file-3" type="file" multiple>-->
        <!--</div>-->
        <!--</div>-->
        <!--<hr>-->
        <!--<div class="form-group">-->
        <!--<div class="file-loading">-->
        <!--<input id="file-4" type="file" class="file" data-upload-url="#" data-theme="fas">-->
        <!--</div>-->
        <!--</div>-->
        <!--<hr>-->
        <!--<div class="form-group">-->
        <!--<button class="btn btn-warning" type="button">Disable Test</button>-->
        <!--<button class="btn btn-info" type="reset">Refresh Test</button>-->
        <!--<button class="btn btn-primary">Submit</button>-->
        <!--<button class="btn btn-outline-secondary" type="reset">Reset</button>-->
        <!--</div>-->
        <!--<hr>-->
        <!--<div class="form-group">-->
        <!--<div class="file-loading">-->
        <!--<input type="file" class="file" id="test-upload" multiple data-theme="fas">-->
        <!--</div>-->
        <!--<div id="errorBlock" class="help-block"></div>-->
        <!--</div>-->
        <!--<hr>-->
        <!--<div class="form-group">-->
        <!--<div class="file-loading">-->
        <!--<input id="file-5" class="file" type="file" multiple data-preview-file-type="any" data-upload-url="#" data-theme="fas">-->
        <!--</div>-->
        <!--</div>-->
    </form>


    <!--<hr>-->
    <!--<h4>Multi Language Inputs</h4>-->
    <!--<form enctype="multipart/form-data">-->
    <!--<label>French Input</label>-->
    <!--<div class="file-loading">-->
    <!--<input id="file-fr" name="file-fr[]" type="file" multiple>-->
    <!--</div>-->
    <!--<hr style="border: 2px dotted">-->
    <!--<label>Spanish Input</label>-->
    <!--<div class="file-loading">-->
    <!--<input id="file-es" name="file-es[]" type="file" multiple>-->
    <!--</div>-->
    <!--</form>-->
    <!--<hr>-->
    <br>
</div>
</body>
<script>
    $("#file").fileinput({
        uploadUrl: 'http://localhost:9091/upload',
//        allowedFileExtensions: ['jpeg', 'jpg', 'png', 'gif', 'bmp'],
        overwriteInitial: false,
        maxFileSize: 12120,
        maxFilesNum: 10,
        maxFileCount: 10,
        language: 'zh',
    });
    $('#file').on('fileuploaded', function (event, data, previewId, index) {
        var form = data.form, files = data.files, extra = data.extra, response = data.response, filenames = data.filenames,reader = data.reader;
        alert('上传成功')
//        if (response.retCode == '000000') {
//            if ($("showurl").css("display")) {
//                $('#html').append("&lt;img src=\"" + response.result.url + "\" alt=\"" + files[index].name + "\" title=\"" + files[index].name + "\" /&gt;" + "\n");
//                $('#markdown').append("![" + files[index].name + "](" + response.result.url + ")" + "\n");
//                $('#markdownlink').append("[![" + files[index].name + "](" + response.result.url + ")]" + "(" + response.result.url + ")" + "\n");
//                $('#url').append(response.data.url + "\n");
//
//            } else if (response.result.url) {
//                $("#showurl").show();
//                $('#html').append("&lt;img src=\"" + response.result.url + "\" alt=\"" + files[index].name + "\" title=\"" + files[index].name + "\" /&gt;" + "\n");
//                $('#markdown').append("![" + files[index].name + "](" + response.result.url + ")" + "\n");
//                $('#markdownlink').append("[![" + files[index].name + "](" + response.result.url + ")]" + "(" + response.result.url + ")" + "\n");
//                $('#url').append(response.result.url + "\n");
//
//            }
//        }
    });
</script>
</html>